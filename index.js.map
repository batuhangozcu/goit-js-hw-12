{"version":3,"file":"index.js","sources":["../src/init.js","../src/main.js"],"sourcesContent":["window.global ||= window;\n","import \"./init\";\n\n// Kullanılacak kısmın import edilmesi\nimport SimpleLightbox from \"simplelightbox\";\n// Ek stillerin eklenmesi\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Dokümantasyonda belirtilen import\nimport iziToast from \"izitoast\";\n// Stil importu\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport axios, { isCancel, AxiosError } from \"axios\";\n\nconst input = document.getElementById(\"input\");\nconst button = document.getElementById(\"submitButton\");\nconst lists = document.querySelector(\".lists\");\nconst loadMore = document.getElementById(\"loadMore\");\nconst loaderContainer = document.querySelector(\".loaderDiv\");\n\nconst params = new URLSearchParams({\n  key: \"48294638-370103394c700755fbc6c4620\",\n  image_type: \"photo\",\n  orientation: \"horizontal\",\n  safesearch: \"true\",\n  per_page: \"40\",\n});\n\nlet page = 1;\n\nloadMore.style.display = \"none\";\n\nbutton.addEventListener(\"click\", async (e) => {\n  loaderContainer.innerHTML = `<span class=\"loader\"></span>`;\n  lists.innerHTML = \"\";\n  e.preventDefault;\n  params.set(\"q\", input.value);\n  try {\n    const images = await fetchImages();\n    renderImages(images);\n  } catch (error) {\n    alert(error);\n  }\n});\n\nasync function fetchImages() {\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n  return response.data;\n}\n\nfunction renderImages(images) {\n  if (images.total == 0) {\n    iziToast.error({\n      position: \"topRight\",\n      message:\n        \"Sorry, there are no images matching your search query. Please try again!\",\n    });\n  }\n\n  const markup = images.hits\n    .map((photo) => {\n      return `<li class=\"list\">\n       <div class=\"cards\">\n       <a class=\"link\" href= \"${photo.largeImageURL}\">\n       <img\n        class=\"image\"\n        src=\"${photo.webformatURL}\"\n        data-source=\"${photo.largeImageURL}\"\n        alt=\"${photo.tags}\"\n      />\n       </a>\n       <div class=\"info\">\n       <p>Likes <span>${photo.likes}</span></p>\n       <p>Views <span>${photo.views}</span></p>\n       <p>Comments <span>${photo.comments}</span></p>\n       <p>Downloads <span>${photo.downloads}</span></p>\n       </div>\n       </div>\n       </li>`;\n    })\n    .join(\"\");\n  loaderContainer.innerHTML = \"\";\n  lists.insertAdjacentHTML(\"beforeend\", markup);\n\n  if ((page > 1, images.total !== 0)) {\n    // loadMore.textContent = \"Load More\";\n    loadMore.style.display = \"flex\";\n  }\n  lists.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    if (e.target.tagName !== \"IMG\") {\n      return;\n    }\n  });\n\n  const lightBox = new SimpleLightbox(\".cards a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n  });\n  lightBox.refresh();\n}\n\nloadMore.addEventListener(\"click\", async () => {\n  try {\n    page += 1;\n    params.set(\"page\", page);\n    const images = await fetchImages();\n    renderImages(images);\n    if (images.totalHits < page * 40) {\n      loadMore.style.display = \"none\";\n      iziToast.info({\n        position: \"topRight\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n    const imageSize = document.querySelector(\".cards\").getBoundingClientRect();\n    window.scrollBy({\n      behavior: \"smooth\",\n      top: imageSize.height * 3,\n    });\n  } catch (error) {\n    alert(error);\n  }\n});\n"],"names":["input","button","lists","loadMore","loaderContainer","params","page","e","images","fetchImages","renderImages","error","axios","iziToast","markup","photo","SimpleLightbox","imageSize"],"mappings":"owBAAA,OAAO,SAAP,OAAO,OAAW,QCclB,MAAMA,EAAQ,SAAS,eAAe,OAAO,EACvCC,EAAS,SAAS,eAAe,cAAc,EAC/CC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAW,SAAS,eAAe,UAAU,EAC7CC,EAAkB,SAAS,cAAc,YAAY,EAErDC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,IACZ,CAAC,EAED,IAAIC,EAAO,EAEXH,EAAS,MAAM,QAAU,OAEzBF,EAAO,iBAAiB,QAAS,MAAOM,GAAM,CAC5CH,EAAgB,UAAY,+BAC5BF,EAAM,UAAY,GAClBK,EAAE,eACFF,EAAO,IAAI,IAAKL,EAAM,KAAK,EAC3B,GAAI,CACF,MAAMQ,EAAS,MAAMC,EAAa,EAClCC,EAAaF,CAAM,CACpB,OAAQG,EAAO,CACd,MAAMA,CAAK,CACf,CACA,CAAC,EAED,eAAeF,GAAc,CAE3B,OADiB,MAAMG,EAAM,IAAI,4BAA4BP,CAAM,EAAE,GACrD,IAClB,CAEA,SAASK,EAAaF,EAAQ,CACxBA,EAAO,OAAS,GAClBK,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACR,CAAK,EAGH,MAAMC,EAASN,EAAO,KACnB,IAAKO,GACG;AAAA;AAAA,gCAEmBA,EAAM,aAAa;AAAA;AAAA;AAAA,eAGpCA,EAAM,YAAY;AAAA,uBACVA,EAAM,aAAa;AAAA,eAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,wBAIDA,EAAM,KAAK;AAAA,wBACXA,EAAM,KAAK;AAAA,2BACRA,EAAM,QAAQ;AAAA,4BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,aAItC,EACA,KAAK,EAAE,EACVX,EAAgB,UAAY,GAC5BF,EAAM,mBAAmB,YAAaY,CAAM,EAE7BN,EAAO,QAAU,IAE9BL,EAAS,MAAM,QAAU,QAE3BD,EAAM,iBAAiB,QAAUK,GAAM,CACrCA,EAAE,eAAgB,EACdA,EAAE,OAAO,OAGjB,CAAG,EAEgB,IAAIS,EAAe,WAAY,CAC9C,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAS,CACpB,CAEAb,EAAS,iBAAiB,QAAS,SAAY,CAC7C,GAAI,CACFG,GAAQ,EACRD,EAAO,IAAI,OAAQC,CAAI,EACvB,MAAME,EAAS,MAAMC,EAAa,EAClCC,EAAaF,CAAM,EACfA,EAAO,UAAYF,EAAO,KAC5BH,EAAS,MAAM,QAAU,OACzBU,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,GAEH,MAAMI,EAAY,SAAS,cAAc,QAAQ,EAAE,sBAAuB,EAC1E,OAAO,SAAS,CACd,SAAU,SACV,IAAKA,EAAU,OAAS,CAC9B,CAAK,CACF,OAAQN,EAAO,CACd,MAAMA,CAAK,CACf,CACA,CAAC"}